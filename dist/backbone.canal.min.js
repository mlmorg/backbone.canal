/*!
 * backbone.canal v0.1.0
 * Copyright 2013, Matt Morgan (@mlmorg)
 * MIT license
 */
(function(){"use strict";var e=this,t=e._,r=e.Backbone,n=r.Router.prototype._routeToRegExp,a=r.Router.prototype._extractParameters,o=/^[\:\*]/,c=/[\:\*]\w+/g,p=/^\?/,u=/\?.*$/,i=/\+/g,s=r.Canal={configure:function(e){return t.extend(this.options,e)},options:{deparam:function(e){var r=e.replace(i," ").split("&"),n={};return t.each(r,function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])}),n}}};t.extend(r.Router.prototype,{_routeToRegExp:function(e){var r=t.map(e.match(c),function(e){return e.replace(o,"")}),a=n(e);return a.names=r,a},_extractParameters:function(e,r){var n={},o=r.match(u);if(o){r=r.replace(o[0],"");var c=s.options.deparam(o[0].replace(p,""));t.each(c,function(e,t){n[t]=e})}var i={},f=a(e,r);return f&&t.each(f,function(t,r){i[e.names[r]]=t}),[i,n]}})}).call(this);